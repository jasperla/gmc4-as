<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Gmc4-as by jasperla</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Gmc4-as</h1>
        <p class="header">Simple assembler for GMC4</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/jasperla/gmc4-as/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/jasperla/gmc4-as/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/jasperla/gmc4-as">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/jasperla">jasperla</a></p>


      </header>
      <section>
        <p>gmc4-as: Simple and non-optimizing assembler for GMC4.</p>

<h2>Introduction</h2>

<p>This assembler is for the R-165 instruction set, as used for the GMC4 4-bit
microcomputer. This neat little toy was made by Gakken, and can be purchased
via MakerShed (<a href="http://www.makershed.com/ProductDetails.asp?ProductCode=MKGK21">http://www.makershed.com/ProductDetails.asp?ProductCode=MKGK21</a>).</p>

<p>After the initial joy of puzzling a program together I figured I could use this
microcomputer to teach myself how to write a basic assembler.</p>

<p>gmc4-as is a naive (but not stupid) approach. It doesn't use a fully fletched
syntax tree, or a BNF grammer implemented in Yacc (although I wrote a BNF
grammer to help me handroll a parser). Essentially there are several passes over
the source code:</p>

<ul>
<li>Strip comments, whitespace and remove empty lines</li>
<li>Four steps of syntax checking</li>
<li>Translating the validated opcodes and operands to instructions</li>
<li>Emit the instructions along with their memory addresses</li>
</ul><p>I haven't done any benchmarking, but since programming the GMC4 easily takes a
few minutes, I didn't really bother yet optimizing the runtime of the assembler.</p>

<h2>Todo</h2>

<p>Apart from some bugs I'm aware of that need fixing, there are various things
I'd like to implement:</p>

<ul>
<li>Symbolic label support for JUMP.</li>
<li>Better error reporting in case of syntax errors.</li>
<li>Better output and more options for formatting.</li>
<li>Add a Makefile so this can be installed (for the fool who wants that..)</li>
</ul><h2>Usage</h2>

<p>By default the memory addresses are printed in front of the instructions:</p>

<p>gurthang:gmc4-as {2286} cat example/showkey.s
  ; Show the key entered on the display
  KA      ; Read the key
  TIY E
  AM
  TIY F
  TIA 0
  AM
  CAL SUND ; Display the key
  JUMP 00
  gurthang:gmc4-as {2287} perl gmc4-as.pl example/showkey.s
  0x00    0
  0x02    AE
  0x03    4
  0x05    AF
  0x07    80
  0x08    4
  0x09    EB
  0x0b    F0
  0x0c    0
  gurthang:gmc4-as {2288} </p>

<h2>Resources</h2>

<ul>
<li>Great site with the original CPU manual for the Tandy Microcomputer Trainer,
upon which the GMC4 is based:
<a href="http://www.polylith.com/%7Ebrendan/ClassicComputers/Tandy/uCptrTrainManual1.html">http://www.polylith.com/~brendan/ClassicComputers/Tandy/uCptrTrainManual1.html</a>
</li>
<li>Google Knol about the GMC4:
<a href="http://knol.google.com/k/programming-the-gakken-gmc-4-microcomputer">http://knol.google.com/k/programming-the-gakken-gmc-4-microcomputer</a>
</li>
</ul><h2>Copyright and License</h2>

<p>Written by Jasper Lievisse Adriaanse <a href="mailto:jasper@humppa.nl">jasper@humppa.nl</a>, released under the
terms of the liberal ISC license. For the license text please see LICENSE.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>